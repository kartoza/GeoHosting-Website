
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product pricing</title>
    <link rel="stylesheet" href="product_pricing.css"> 
    <link rel="stylesheet" href="../styles.css"> 
</head>

<body>
    

    {% block content %}
    <div class="background-container" id="screenBody">
      
        <!-- Left background image -->
        <div class="background-left"></div>
        <!-- Right background image -->
        <div class="background-right"></div>
        <!-- Content goes here -->
        <div class="content" style="height: 100vh; margin-top: 1.5%;">

          <!-- Cards Container -->
          <div class="cards-container-pricing">
              <!-- Card 1 -->
              <div class="card-pricing">
                  <div class="logo-pricing">
                    <img src="/assets/geohosting/images/Geosight.svg" id="pricing-card-logo" alt="Logo">
                  </div>
                  <!-- <div class="title">Geosight</div> -->
              </div>
              <!-- Card 2 -->
              <div class="card-pricing">
                  <div class="header-pricing">
                      <div class="header-text-pricing">GeoSight Basic</div>
                  </div>
                  <div class="price-container-pricing">
                    <div class="price-pricing" id="pricing-card-pice-free">0€</div>
                    <div class="price-details-pricing">/month</div>
                  </div>
                  <div class="button-pricing">Get GeoSight Basic</div>
                  <div class="features-title-pricing">Advanced Features</div>
                  <div class="features-list-pricing">
                      <div class="feature-item-pricing"><div class="vector-pricing"> <div class="vector-tick-pricing"></div></div><div class="feature-text-pricing">Feature 1</div></div>
                      <div class="feature-item-pricing"><div class="vector-pricing"> <div class="vector-tick-pricing"></div></div><div class="feature-text-pricing">Feature 2</div></div>
                      <div class="feature-item-pricing"><div class="vector-pricing"> <div class="vector-tick-pricing"></div></div><div class="feature-text-pricing">Feature 3</div></div>
                  </div>
              </div>

              <!-- Card 3 -->
              <div class="card-pricing">
                  <div class="header-pricing">
                      <div class="header-text-pricing">GeoSight Advanced</div>
                  </div>
                  <div class="price-container-pricing">
                    <div class="price-pricing" id="pricing-card-pice-free">0€</div>
                    <div class="price-details-pricing">/month</div>
                  </div>
                  <div class="button-pricing">Get Geosight Advanced</div>
                  <div class="features-title-pricing">Advanced Features</div>
                  <div class="features-list-pricing">
                      <div class="feature-item-pricing"><div class="vector-pricing"> <div class="vector-tick-pricing"></div></div><div class="feature-text-pricing">Feature 1</div></div>
                      <div class="feature-item-pricing"><div class="vector-pricing"> <div class="vector-tick-pricing"></div></div><div class="feature-text-pricing">Feature 2</div></div>
                      <div class="feature-item-pricing"><div class="vector-pricing"> <div class="vector-tick-pricing"></div></div><div class="feature-text-pricing">Feature 3</div></div>
                      <div class="feature-item-pricing"><div class="vector-pricing"> <div class="vector-tick-pricing"></div></div><div class="feature-text-pricing">Feature 4</div></div>
                      <div class="feature-item-pricing"><div class="vector-pricing"> <div class="vector-tick-pricing"></div></div><div class="feature-text-pricing">Feature 5</div></div>
                      <div class="feature-item-pricing"><div class="vector-pricing"> <div class="vector-tick-pricing"></div></div><div class="feature-text-pricing">Feature 6</div></div>
                  </div>
              </div>

              <!-- Card 4 -->
              <div class="card-pricing">
                  <div class="header-pricing">
                      <div class="header-text-pricing">GeoSight Gold</div>
                  </div>
                  <div class="price-container-pricing">
                    <div class="price-pricing" id="pricing-card-pice-free">19.99€</div>
                    <div class="price-details-pricing">/month</div>
                  </div>
                  <div class="button-pricing">Get Geosight Gold</div>
                  <div class="features-title-pricing">Advanced Features</div>
                  <div class="features-list-pricing">
                      <div class="feature-item-pricing"><div class="vector-pricing"> <div class="vector-tick-pricing"></div></div><div class="feature-text-pricing">Feature 1</div></div>
                      <div class="feature-item-pricing"><div class="vector-pricing"> <div class="vector-tick-pricing"></div></div><div class="feature-text-pricing">Feature 2</div></div>
                      <div class="feature-item-pricing"><div class="vector-pricing"> <div class="vector-tick-pricing"></div></div><div class="feature-text-pricing">Feature 3</div></div>
                      <div class="feature-item-pricing"><div class="vector-pricing"> <div class="vector-tick-pricing"></div></div><div class="feature-text-pricing">Feature 4</div></div>
                      <div class="feature-item-pricing"><div class="vector-pricing"> <div class="vector-tick-pricing"></div></div><div class="feature-text-pricing">Feature 5</div></div>
                      <div class="feature-item-pricing"><div class="vector-pricing"> <div class="vector-tick-pricing"></div></div><div class="feature-text-pricing">Feature 6</div></div>
                  </div>
              </div>
          </div>
          
        </div>
      </div>
      <script>
        async function fetchAndGroupItemPrices() {
                    const baseUrl = '/api/resource/Item%20Price';
                    var item_name = localStorage.getItem('selectedItem');
                    const lowerCaseItemName = item_name.toLowerCase();
                    const filters = `[["item_name","like","%${lowerCaseItemName}%"]]`;
                    const fields = '["*"]';

                    const url = `${baseUrl}?filters=${encodeURIComponent(filters)}&fields=${encodeURIComponent(fields)}`;

                    try {
                        const response = await fetch(url, {
                            method: 'GET',
                            headers: {
                                'Content-Type': 'application/json'
                            }
                        });

                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }

                        const data = await response.json();
                        
                        // Process and group the data
                        const groupedData = data.data.reduce((acc, item) => {
                            const baseName = item.item_code.replace(/-(MEDIUM|SMALL|LARGE)-(AZ|GCP|DO|AWS)$/, '');
                            if (!acc[baseName]) {
                                acc[baseName] = {};
                            }
                            acc[baseName][item.item_code] = {
                                price_list_rate: item.price_list_rate,
                                currency: item.currency
                            };
                            return acc;
                        }, {});

                        return groupedData;
                    } catch (error) {
                        console.error('Error fetching and grouping item prices:', error);
                    }
                }

                // fetchAndGroupItemPrices(item_name).then(groupedData => console.log(JSON.stringify(groupedData, null, 2)));


                
      </script>
      {% endblock %}

</body>

</html>


